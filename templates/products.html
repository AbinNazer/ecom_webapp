{% extends "base.html" %}

{% block content %}
<div class="title">üõç Available Products</div>

<!-- Search & Filter -->
<div class="filters">
    <form method="get" action="{{ url_for('products_page') }}">
        <input type="text" name="search" placeholder="Search products..." value="{{ request.args.get('search','') }}">
        <select name="category">
            <option value="">All Categories</option>
            {% for cat in categories %}
            <option value="{{ cat }}" {% if request.args.get('category') == cat %}selected{% endif %}>{{ cat }}</option>
            {% endfor %}
        </select>
        <button type="submit">Filter</button>
    </form>
</div>

<!-- Product Grid -->
<div class="grid">
    {% for product in products %}
    <div class="card">
        <div class="image-container">
            <img src="{{ product.image }}" alt="{{ product.name }}">
            {% if product.discount %}
            <div class="discount-badge">-{{ product.discount }}%</div>
            {% endif %}
        </div>
        <div class="card-content">
            <h3>{{ product.name }}</h3>
            <div class="price">
                ‚Çπ{{ product.price }}
                {% if product.original_price %}
                <span class="old-price">‚Çπ{{ product.original_price }}</span>
                {% endif %}
            </div>
            <div class="rating">
                {% for i in range(1,6) %}
                <span class="star {% if i <= product.rating %}filled{% endif %}">‚òÖ</span>
                {% endfor %}
            </div>
            <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="add-btn">Add to Cart üõí</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}



