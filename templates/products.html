{% extends "base.html" %}
{% block content %}

<section class="products-section">
    <div class="filters">
        <form method="get" action="/products">
            <input type="text" name="search" placeholder="Search for products..." value="{{ request.args.get('search','') }}">
            <select name="category">
                <option value="">All Categories</option>
                {% for cat in categories %}
                <option value="{{ cat }}" {% if request.args.get('category') == cat %}selected{% endif %}>{{ cat }}</option>
                {% endfor %}
            </select>
            <button type="submit">Filter</button>
        </form>
    </div>

    <div class="grid">
        {% for product in products %}
        <div class="card">
            <div class="image-container">
                <img src="{{ product.image }}" alt="{{ product.name }}">
                {% if product.discount %}
                <span class="discount">-{{ product.discount }}%</span>
                {% endif %}
            </div>
            <h3>{{ product.name }}</h3>
            <p class="price">
                â‚¹{{ product.price }}
                {% if product.original_price %}
                <span class="original">â‚¹{{ product.original_price }}</span>
                {% endif %}
            </p>
            <div class="rating">
                {% for i in range(1,6) %}
                    {% if i <= product.rating %}
                    <span class="star filled">â˜…</span>
                    {% else %}
                    <span class="star">â˜†</span>
                    {% endif %}
                {% endfor %}
            </div>
            <a href="/add_to_cart/{{ product.id }}" class="btn">Add to Cart ðŸ›’</a>
        </div>
        {% endfor %}
    </div>
</section>

{% endblock %}


